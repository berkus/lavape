<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Editing the declaration tree view</title>
  <meta http-equiv="Content-Style-Type" content="text/css"/>
  <link href="LavaStyles.css" type="text/css" rel="STYLESHEET" />
  <style type="text/css" xml:space="preserve">
/*<![CDATA[*/
  p.c6 {font-weight: bold}
  i.c5 {font-weight: bold; color: Red}
  p.c4 {text-align: center}
  p.c3 {text-align: left}
  b.c2 {font-style: italic; color: Red}
  h2.c1 {text-align: center}
  /*]]>*/
      .style1
      {
          color: #FF0000;
          font-style: italic;
      }
  </style>
</head>

<body>
  <h2 class="c1">Editing the declaration tree</h2>

  <p class="c3">The <b class="c2">LavaPE</b> declaration view is associated with three specific toolbars, the <b>&quot;tree operations bar&quot;</b>, the actual <b>&quot;declarations bar&quot;,</b> and the <b>&quot;details bar&quot;.</b>.</p>

  <p class="c3">The <b>tree operations toolbar</b></p>

  <p class="c4"><img src="../images/TreeOps.png" alt="Tree operations toolbar" width="317" height="23" /></p>

  <p>provides the following operations (from left to right), which partly apply to a single tree node, partly to the sub-tree starting at the current selection, partly to the entire declaration tree:</p>

  <ul>
    <li><b><img alt="Expand" src="../images/Expand.png" height="20" width="21" /> Expand/open</b> the whole sub-tree starting at the current selection.</li>

    <li><b><img alt="Contract" src="../images/Contract.png" height="21" width="20" /> Contract</b> the selected sub-tree.</li>

    <li><b><img alt="Show/hide empty optionals" src="../images/Optionals.png" height="21" width="25" /> Show/hide</b> the <b>empty optional</b> direct sub-nodes of the current node.</li>

    <li><b><img alt="Show/hide optionals in subtree" src="../images/OptionalsSubtree.png" height="18" width="45" /> Show/hide empty optional elements within the entire sub-tree</b> starting at the current selection.</li>

    <li><img alt="Show/hide utility window" src="../images/UtilWindow.png" align="middle" height="20" width="24" /> Open/close the (tabbed) <b>utility window</b> (used particularly for displaying error messages and comments).</li>

    <li><img alt="../images/Comments on/off in exec view" src="../images/Comments.png" align="middle" height="22" width="44" /> Go to the <b>next/preceding comment</b> in the declaration tree.</li>

    <li><img alt="Errors" src="../images/Errors.png" align="middle" height="23" width="48" /> Go to the <b>next/preceding error</b> in the declaration tree.</li>

    <li><b><img alt="Complete check" src="../images/Check.png" align="middle" height="22" width="24" /> Check</b> the entire <b class="c2">Lava</b> program file, including all execs, for errors. (This is done automatically when opening a <b class="c2">Lava</b> program file, but not on every individual tree editing operation. In the latter case only the declarations are checked again.)</li>

    <li><img alt="" src="../images/CheckIncludes.png" align="middle" border="0" height="24" hspace="0" width="22" /> <strong>Check</strong> this and all included files.</li>

    <li><b><img alt="Run" src="../images/Run.png" align="middle" height="22" width="22" /> Run</b> the current <b class="c2">Lava</b> program.</li>
  </ul>

  <p><a id="declBar"></a>The <b>declarations toolbar</b></p>

  <p class="c4"><img src="../images/DeclTB.png" alt="Declarations toolbar" align="middle" border="0" width="364" height="23" /></p>

  <p>provides the following operations (from left to right):</p>

  <ul>
    <li><img alt="Include file" src="../images/Include.png" align="middle" height="19" width="21" /> Specify a new <b>&quot;include file&quot;</b> for the current <b class="c2">Lava</b> file, which will appear then in the &quot;include view&quot; left of the tree view window.</li>

    <li><img alt="Package" src="../images/Package.png" align="middle" height="20" width="21" /> Declare a new <b>package</b>,</li>

    <li><img alt="Initiator" src="../images/Initiator.png" align="middle" height="19" width="20" /> Declare a new <b>initiator</b>,</li>

    <li><img alt="Interface" src="../images/NewItf.png" align="middle" height="22" width="23" /> Declare a new <b>class</b>,</li>

    <li><img alt="Implementation" src="../images/NewImpl.png" align="middle" height="23" width="25" /> Declare a new <b>implementation</b>,</li>

    <li><img alt="Component object specification" src="../images/CompObjSpec.png" align="middle" height="22" width="23" /> Declare a new <b>component object specification</b>,</li>

    <li><img alt="Component object implementation" src="../images/CompObjImpl.png" align="middle" height="22" width="21" /> Declare a new <b>component object implementation</b>,</li>

    <li><img alt="Set of objects" src="../images/Set.png" align="middle" height="21" width="24" /> Declare a new <b>set</b> of objects of a certain class,</li>

    <li><img alt="Enumeration" src="../images/Enum.png" align="middle" height="19" width="23" /> Declare a new <b>enumeration</b> type,</li>

    <li><img alt="Virtual type" src="../images/VT.png" align="middle" height="19" width="21" /> Declare a new <b>virtual type</b>,</li>

    <li><img alt="Member function" src="../images/MemberFunc.png" align="middle" height="20" width="21" /> Declare a new <b>member function</b> of an class or implementation,</li>

    <li><img alt="Member variable" src="../images/MemberVar.png" align="middle" height="20" width="23" /> Declare a new <b>member variable</b> of an class or implementation or an <b>input or output parameter of a function</b>.</li>

    <li><img src="../images/EnumItem.png" align="middle" border="0" height="18" width="21" alt="img" /> Declare a new <b>enumeration item</b>.</li>

    <li><img src="../images/MakeGUI.png" align="middle" border="0" height="21" width="23" alt="img" />Make <b>GUI service</b> from selected class.</li>
  </ul>

  <p><a id="detailsBar"></a>The <b>details toolbar</b></p>

  <p class="c4"><img src="../images/DetailsTB.png" alt="Details toolbar" align="middle" border="0" width="329" height="23" /></p>

  <p>provides the following operations (from left to right):</p>

  <ul>
    <li><b><img alt="Open property sheet" src="../images/Spectacles.png" align="middle" height="20" width="22" /> Open</b> the <b>property sheet</b> of the selected <b class="c2">Lava</b> entity or open the selected <b class="c2"><a href="EditExec.htm">exec or invariant</a></b> for editing.</li>

    <li><img alt="Attach/edit comment" src="../images/Comment.png" align="middle" height="21" width="22" /> Attach/edit a <b>comment</b> to the selected <b class="c2">Lava</b> entity.</li>

    <li><b><img alt="Go to declaration" src="../images/GoToDecl.png" align="middle" height="21" width="22" /> Jump</b> to the <b>declaration</b> of the selected <b class="c2">Lava</b> entity.</li>

    <li><img src="../images/GoToImpl.png" align="middle" border="0" height="23" width="25" alt="img" /> <b>Go to implementation</b> (of selected function or class).</li>

    <li><b><img alt="Return to reference" src="../images/ReturnToRef.png" align="middle" height="21" width="23" /> Return</b> to the original <b class="c2">Lava</b> entity (after &quot;jump to declaration&quot;).</li>

    <li><img src="../images/FindReferences.png" align="middle" border="0" height="24" width="24" alt="img" /> <b>Find references</b> to selected symbol in all open or included <i class="c5">Lava</i> files. (Double-click a list entry to see the place where the corresponding symbol is referenced.)</li>

    <li><img src="../images/FindSymbolByName.png" border="0" height="23" width="24" alt="img" /> <b><a name="find SymbolByName"></a>Find symbol by name.</b></li>

    <li><b><img alt="Open override view" src="../images/Derive.png" align="middle" height="16" width="22" /> Open the &quot;override view&quot;</b> in order to override/specialize the features or virtual types of the selected class or package.</li>

    <li><b><img alt="Override feature or VT" src="../images/Override.png" align="middle" height="18" width="22" /> Override</b> the feature or virtual type selected in the <b class="c2"><a href="OverrideView.htm">override view</a></b>.</li>

    <li><b><img alt="Open form view" src="../images/Formimpl.png" align="middle" height="21" width="23" /> Open</b> the (WYSIWYG) <b class="c2"><a href="EditForm.htm">form view</a></b> and the &quot;form structure tree view&quot; associated with a &quot;<b class="c2">Lava</b> GUI implementation&quot;.</li>

    <li><b><img alt="Insert text in form" src="../images/FormText.png" align="middle" height="18" width="20" /> Insert text</b> <i>between</i> the fields of a form (each of which may be decorated also individually with &quot;prefix&quot; and &quot;suffix&quot; texts).</li>

    <li><img src="../images/InsOptItem.png" align="middle" border="0" height="21" width="23" alt="img" /> <b>Insert optional item</b> in form view.</li>

    <li><img src="../images/DelOptItem.png" align="middle" border="0" height="21" width="23" alt="img" /> <b>Delete optional item</b> in form view.</li>
  </ul>

  <h3>Basics of declaration tree editing</h3>

  <p class="c6">Context-sensitive help</p>

  <p>Use the context-sensitive help of <i class="c5">LavaPE</i> to get information about individual menu items and operator and keyword tool buttons: Click the context help tool button <img alt="context help" src="../images/CtxHelp.png" align="middle" height="23" width="22" />, drag it to the respective <i class="c5">Lava</i> tool button or menu item for which you want to get an explanation and drop it there.</p>

  <p class="c6">How to insert/delete/edit <span class="style1">Lava</span> entities</p>

  <p>The declaration tree consists of two alternating kinds of layers: <b>1. declaration layers</b> containing the actual entity declarations, and <b>2. category layers</b> that serve for the distinction between several kinds of nested, subordinate declarations for some entities, for instance <b>virtual types</b>, <b>nested declarations</b><i>,</i> <b>features</b>, <b>execs/invariants</b>, or <b>input/output parameters</b> of functions or initiators.</p>

  <p>If you select any tree node of the <b class="c2">Lava</b> declaration view then the enabled tool buttons on the declaration toolbar indicate which declarations may be <b>inserted after</b> the selected declaration node or <b>below</b> the selected category node by clicking these buttons. If you click the scissors <img alt="scissors" src="../images/Scissors.png" align="middle" height="20" width="16" /> then the selected declaration is deleted (together with the entire sub-tree that may beginning at this node) and copied to the clipboard. If you press the <b>DEL</b> key instead of clicking the scissors <img alt="scissors" src="../images/Scissors.png" align="middle" height="20" width="16" /> then the declaration is deleted but not written to the clipboard.</p>

  <p>If you double-click the text to the right of an entity icon then the property sheet of the entity is opened for editing. Alternatively you can <i>select</i> the declaration node and then click the spectacles <img alt="spectacles" src="../images/Spectacles.png" align="middle" height="20" width="22" />to open the property sheet.</p>

  <p class="c6">How to insert/delete optional parts</p>

  <p>You can click the &quot;Show empty optionals&quot; tool button <img alt="{short description of image}" src="../images/ShowOpts.png" height="20" width="24" /> on a declaration node to toggle the visibility of its empty category nodes (having no subordinate nodes). The same can be achieved for an entire sub-tree by using the &quot;Show/hide all empty optionals&quot; buttons <img alt="show all optionals" src="../images/ShowAllOpts.png" align="middle" height="22" width="47" /> instead.</p>

  <p><b>How to</b> insert, edi<b>t</b> and <b>s</b>tep through comments</p>

  <p>The yellow balloon <img alt="{short description of image}" src="../images/Comment.png" height="21" width="22" /> may be clicked to add or change a comment that is associated with the currently selected tree node of the declaration view. The icon of a commented tree node has a little yellow bubble on the right side, for instance <img alt="commented node" src="../images/classint1.png" align="middle" height="15" width="21" />. The two buttons <img alt="Comments" src="../images/Comments.png" align="middle" height="22" width="44" /> may be used to open/close the comments window and to step from comment to comment in forward or backward direction. If the comments window is open and you click a commented tree node then the associated comment will be shown in the comments window.</p>

  <p class="c6">Error navigation</p>

  <p>The two buttons <img alt="Errors" src="../images/Errors.png" align="middle" height="23" width="48" /> may be used to open/close the error window and to step from error to error in forward or backward direction. The icon of an erroneous tree node has a little red rectangle on the right side, for instance <img alt="Error node" src="../images/classint2.png" align="middle" height="15" width="21" />.</p>

  <p class="c6">Cut/copy/paste and drag/drop</p>

  <p>Cut/copy/paste work in the usual way, using the clipboard of MS Windows. Proper enabling/disabling of the corresponding buttons <img alt="Cut/Copy/Paste" src="../images/CutCopyPaste.png" align="middle" height="22" width="70" /> combined with subsequent checks that are performed anyway after each edit operation prevent inadmissible operations.</p>

  <p>Drag-and-drop is also available in the declaration view. For instance you can rearrange the declarations of a package, the items of an enumeration type, or the features of an class or implementation simply by drag-and-drop. To shift an item to the first position on its respective tree layer you can drag-and-drop it to the parent node. The <b>Shift</b> key can be used in the usual way to select a sequence of contiguous items.</p>

  <p class="c6">Note that &quot;cut&quot; deletes a <i>Lava</i> entity and a subsequent &quot;paste&quot; creates a new one in any case, having a new internal ID, whereas the &quot;move&quot; mode of drag-and-drop (press the Shift key while dragging!) retains the identity of the moved 
      <span class="style1">Lava</span> entity.</p>

  <p>If you drag and drop between different <b class="c2">Lava</b> files then all existing references to the moved <b class="c2">Lava</b> entity are updated accordingly, provided they are contained in a file that is open <b>at that moment</b> in the <b class="c2">Lava</b> declaration editor.</p>

  <p>For drag-and-drop the default operation is <b>move</b>. Press Ctrl <b>after starting the drag operation</b> to enforce a <b>copy</b>. You can also select multiple items (using the Ctrl key) before starting the drag operation. In this case don&#39;t release the left mouse button after the last selection but rather start dragging immediately. The pressed or released state of the Ctrl button (which means copy or move, respectively) matters only at the moment of the drop operation.</p>

  <p class="c6"><a id="undoRedo"></a>Undo/Redo</p>

  <p>Use the &quot;Undo&quot; and &quot;Redo&quot; buttons <img alt="Undo/Redo" src="../images/UndoRedo.png" align="middle" height="23" width="43" /> to undo or redo individual edit operations in any of the <b class="c2">LavaPE</b> views step by step.</p>

  <p>Drag-and-drop operations between different <i class="c5">Lava</i> files modify these files in a single edit step. Up to <i class="c5">Lava</i> release 0.6.3 undo/redo had to be applied to each of these files separately. Release 0.6.4 has introduced synchronized undo/redo support for such operations: You have to apply undo/redo only to one of these files to undo/redo the edit step also in the other file. But note that you can undo/redo edit steps only in strictly reverse order. So if you have applied further edit steps to one or both of these files then you have to undo/redo these before you can undo/redo the drag-and-drop operation between the files, or else you have to resort to manual &quot;forward&quot; repair steps.</p>

  <p class="c6">Go to declaration / return to reference</p>

  <p>If the declaration of a <b class="c2">Lava</b> entity references another <b class="c2">Lava</b> entity then you can double-click the icon left of the actual declaration to jump to the referenced entity&#39;s declaration. Alternatively you can select the respective declaration node and click the &quot;Go to declaration&quot; button <img alt="go to declaration" src="../images/GoToDecl.png" align="middle" height="21" width="22" />. If the selected declaration references <i>more than one</i> other entity then a small combo box is popped up from which you can select where to go.</p>

  <p>Use the &quot;Return to reference&quot; button <img alt="return to reference" src="../images/ReturnToRef.png" align="middle" height="21" width="23" /> to follow the sequence of such &quot;Go to declaration&quot; operations in backward direction (= back to the locations from where you came). Both operations may jump forth and back between exec and declaration views and even between different (&quot;included&quot;) <b class="c2">Lava</b> documents.</p>

  <p class="c6">See also <a href="OverrideView.htm">override view</a>.</p>
</body>
</html>
