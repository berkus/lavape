<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<meta http-equiv="Content-Language" content="en-us">
<TITLE>Editing the declaration tree view</TITLE>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<META content="Klaus D. Günther" name=Author>
<META content="Microsoft FrontPage 5.0" name=GENERATOR>
<meta name="ProgId" content="FrontPage.Editor.Document">
<LINK href="LavaStyles.css" 
type=text/css rel=STYLESHEET></HEAD>
<BODY>
<H2 align=center>Editing the declaration tree</H2>
<P align=left>The <B><I><FONT color=#ff0000>LavaPE</FONT></I></B> declaration 
view is associated with three specific toolbars, the <B>"tree operation 
bar"</B>, the actual <B>"declaration bar", </B>and the<B> "details bar".</B>. 
</P>
<P align=left>The <B>tree operation bar</B></P>
<P align=center><IMG src="TreeTB.png" width="330" height="32"></P>
<P>provides the following operations (from left to right), which partly apply to 
a single tree node, partly to the sub-tree starting at the current selection, 
partly to the entire declaration tree:</P>
<UL>
  <LI><B>
  <IMG alt=Expand src="Expand.png" 
  align=absMiddle width="21" height="20"> Expand/open</B> the whole sub-tree starting at the current 
  selection. 
  <LI><B>
  <IMG alt=Contract src="Contract.png" 
  align=absMiddle width="20" height="21"> Contract</B> the selected sub-tree. 
  <LI><B>
  <IMG alt="Show/hide empty optionals" 
  src="Optionals.png" align=absMiddle width="25" height="21"> Show/hide</B> the 
  <B>empty optional</B> direct sub-nodes of the current node. 
  <LI><B>
  <IMG alt="Show/hide optionals in subtree" 
  src="OptionalsSubtree.png" align=absMiddle width="45" height="18"> Show/hide empty 
  optional elements within the entire sub-tree</B> starting at the current 
  selection. 
  <LI>
  <IMG alt="Show/hide utility window" 
  src="UtilWindow.png" align=absMiddle width="24" height="20"> Open/close the 
  (tabbed) <B>utility window</B> (used particularly for displaying error 
  messages and comments). 
  <LI>
  <IMG alt="Comments on/off in exec view" 
  src="Comments.png" align=absMiddle width="44" height="22"> Go to the 
  <B>next/preceding comment</B> in the declaration tree. 
  <LI>
  <IMG alt=Errors src="Errors.png" 
  align=absMiddle width="48" height="23"> Go to the <B>next/preceding error</B> in the declaration 
  tree. 
  <LI><B>
  <IMG alt="Complete check" src="Check.png" 
  align=absMiddle width="24" height="22"> Check</B> the entire <B><I><FONT 
  color=#ff0000>Lava</FONT></I></B> program file, including all execs, for 
  errors. (This is done automatically when opening a <B><I><FONT 
  color=#ff0000>Lava</FONT></I></B> program file, but not on every individual 
  tree editing operation. In the latter case only the declarations are checked 
  again.) 
  <LI>
  <IMG alt="" hspace=0 src="CheckIncludes.png" 
  align=absMiddle border=0 width="22" height="24">&nbsp;<STRONG>Check</STRONG> this and all included 
  files.
  <LI><B><IMG alt=Run src="Run.png" 
  align=absMiddle width="22" height="22"> Run</B> the current <B><I><FONT 
  color=#ff0000>Lava</FONT></I></B> program. </LI></UL>
<P><A name=declBar></A>The <B>declaration bar</B> </P>
<P align=center><img border="0" src="DeclTB.png" width="362" height="32"></P>
<P>provides the following operations (from left to right):</P>
<UL>
  <LI>
  <IMG alt="Include file" src="Include.png" 
  align=absMiddle width="21" height="19"> Specify a new <B>"include file"</B> for the current 
  <B><I><FONT color=#ff0000>Lava</FONT></I></B> file, which will appear then in 
  the "include view" left of the tree view window. 
  <LI>
  <IMG alt=Package src="Package.png" 
  align=absMiddle width="21" height="20"> Declare a new <B>package</B>, 
  <LI>
  <IMG alt=Initiator src="Initiator.png" 
  align=absMiddle width="20" height="19"> Declare a new <B>initiator</B>, 
  <LI>
  <IMG alt=Interface src="NewItf.png" 
  align=absMiddle width="23" height="22"> Declare a new <B>interface</B>, 
  <LI>
  <IMG alt=Implementation src="NewImpl.png" 
  align=absMiddle width="25" height="23"> Declare a new <B>implementation</B>, 
  <LI>
  <IMG alt="Component object specification" 
  src="CompObjSpec.png" align=absMiddle width="23" height="22"> Declare a new 
  <B>component object specification</B>, 
  <LI>
  <IMG alt="Component object implementation" 
  src="CompObjImpl.png" align=absMiddle width="21" height="22"> Declare a new 
  <B>component object implementation</B>, 
  <LI>
  <IMG alt="Set of objects" src="Set.png" 
  align=absMiddle width="24" height="21"> Declare a new <B>set</B> of objects of a certain class, 
  <LI>
  <IMG alt=Enumeration src="Enum.png" 
  align=absMiddle width="23" height="19"> Declare a new <B>enumeration</B> type, 
  <LI>
  <IMG alt="Virtual type" src="VT.png" 
  align=absMiddle width="21" height="19"> Declare a new <B>virtual type</B>, 
  <LI>
  <IMG alt="Member function" src="MemberFunc.png" align=absMiddle width="21" height="20"> Declare a 
  new <B>member function</B> of an interface or 
  implementation, 
  <LI>
  <IMG alt="Member variable" src="MemberVar.png" align=absMiddle width="23" height="20"> Declare a 
  new <B>member variable</B> of an interface or 
  implementation or an<B> input or output parameter of a function</B>. </LI> 
  <LI>
  <img border="0" src="EnumItem.png" align="absmiddle" width="21" height="18"> Declare a 
  new <b>enumeration item</b>.</LI></UL>
<P><A name=detailsBar></A>The <B>details bar</B> </P>
<P align=center>
<img border="0" src="DetailsTB.png" width="292" height="32"></P>
<P>provides the following operations (from left to right):</P>
<UL>
  <LI><B>
  <IMG alt="Open property sheet" src="Spectacles.png" align=absMiddle width="22" height="20"> Open</B> the <B>property sheet</B> of the selected 
  <B><I><FONT color=#ff0000>Lava</FONT></I></B> entity or open the selected 
  <B><I><A href="EditExec.htm">exec or invariant</A></I></B> for editing. 
  <LI>
  <IMG alt="Attach/edit comment" src="Comment.png" align=absMiddle width="22" height="21"> Attach/edit a <B>comment</B> to the selected 
  <B><I><FONT color=#ff0000>Lava</FONT></I></B> entity. 
  <LI><B>
  <IMG alt="Go to declaration" src="GoToDecl.png" align=absMiddle width="22" height="21"> Jump</B> to the <B>declaration</B> of the selected 
  <B><I><FONT color=#ff0000>Lava</FONT></I></B> entity. 
  <LI>
  <img border="0" src="GoToImpl.png" align="absmiddle" width="25" height="23"> <b>G<span lang="de">o</span> to 
  implementation</b> (of selected function or interface).<LI><B>
  <IMG alt="Return to reference" 
  src="ReturnToRef.png" align=absMiddle width="23" height="21"> Return</B> to the 
  original <B><I><FONT color=#ff0000>Lava</FONT></I></B> entity (after "jump to 
  declaration"). 
  <LI>
  <img border="0" src="FindReferences.png" align="absmiddle" width="24" height="24"> <b>Find references</b> to selected symbol in all open or included
  <font color="#FF0000"><i><b>Lava</b></i></font> files. (Double-click a list 
  entry to see the place where the corresponding symbol is referenced.)<LI>
  <img border="0" src="FindSymbolByName.png" width="24" height="23"> <b>
  <a name="find SymbolByName"></a>Find symbol by name.</b><LI><B>
  <IMG alt="Open override view" src="Derive.png" align=absMiddle width="22" height="16"> Open the "override view" </B>in order to 
  override/specialize the features or virtual types of the selected interface or 
  package. 
  <LI><B>
  <IMG alt="Override feature or VT" 
  src="Override.png" align=absMiddle width="22" height="18"> Override</B> the 
  feature or virtual type selected in the override view. 
  <LI><B>
  <IMG alt="Open form view" src="Formimpl.png" align=absMiddle width="23" height="21"> Open</B> the (WYSIWYG) <B><I><FONT color=#ff0000><A 
  href="EditForm.htm">"form view"</A></FONT></I></B> and the "form structure 
  tree view" associated with a "<B><I><FONT color=#ff0000>Lava</FONT></I></B> 
  GUI implementation". 
  <LI><B>
  <IMG alt="Insert text in form" src="FormText.png" align=absMiddle width="20" height="18"> Insert text </B><I>between</I> the fields of a form 
  (each of which may be decorated also individually with "prefix" and "suffix" 
  texts). </LI></UL>
<H3>Basics of declaration tree editing</H3>
<P><B><B>Context-sensitive help</B></B></P>
<P>Use the context-sensitive help of <I><FONT 
color=#ff0000><B>LavaPE</B></FONT></I> to get information about individual menu 
items and operator and keyword tool buttons: Click the context help tool button 
<IMG alt="context help" src="CtxHelp.png" 
align=absMiddle width="22" height="23">, drag it to the respective <I><FONT 
color=#ff0000><B>Lava</B></FONT></I> tool button or menu item for which you want 
to get an explanation and drop it there. </P>
<P><B>How to insert/delete/edit <I><FONT color=#ff0000>Lava</FONT></I> 
entities</B></P>
<P>The declaration tree consists of two alternating kinds of layers: <B>1. 
declaration layers</B> containing the actual entity declarations, and <B>2. 
category layers</B> that serve for the distinction between several kinds of 
nested, subordinate declarations for some entities, for instance <B>virtual 
types</B>, <B>nested declarations</B><I>,</I> <B>features</B>, 
<B>execs/invariants</B>, or <B>input/output parameters</B> of functions or 
initiators.</P>
<P>If you select any tree node of the <B><I><FONT 
color=#ff0000>Lava</FONT></I></B> declaration view then the enabled tool buttons 
on the declaration toolbar indicate which declarations may be <B>inserted after 
</B>the selected declaration node or <B>below</B> the selected category node by 
clicking these buttons. If you click the scissors 
<IMG alt=scissors 
src="Scissors.png" align=absMiddle width="16" height="20"> then the selected 
declaration is deleted (together with the entire sub-tree that may beginning at 
this node) and copied to the clipboard. If you press the <B>DEL</B> key instead 
of clicking the scissors 
<IMG alt=scissors 
src="Scissors.png" align=absMiddle width="16" height="20"> then the declaration is 
deleted but not written to the clipboard.</P>
<P>If you double-click the text to the right of an entity icon then the property 
sheet of the entity is opened for editing. Alternatively you can <I>select</I> 
the declaration node and then click the spectacles 
<IMG alt=spectacles 
src="Spectacles.png" align=absMiddle width="22" height="20">to open the property 
sheet.</P>
<P><B>How to insert/delete optional parts</B></P>
<P>You can click the "Show empty optionals" tool button 
<IMG 
alt="{short description of image}" src="ShowOpts.png" width="24" height="20"> on a 
declaration node to toggle the visibility of its empty category nodes (having no 
subordinate nodes). The same can be achieved for an entire sub-tree by using the 
"Show/hide all empty optionals" buttons 
<IMG alt="show all optionals" 
src="ShowAllOpts.png" align=absMiddle width="47" height="22"> instead.</P>
<P><B>How to <B>insert, edi</B><B>t</B> and <B>s</B>tep through comments</B></P>
<P>The yellow balloon 
<IMG height=22 alt="{short description of image}" 
src="Comment.png" width=25> may be clicked to add or change a comment 
that is associated with the currently selected tree node of the declaration 
view. The icon of a commented tree node has a little yellow bubble on the right 
side, for instance 
<IMG alt="commented node" 
src="classint1.png" align=absMiddle width="21" height="15">. The two buttons 
<IMG alt=Comments src="Comments.png" align=absMiddle width="44" height="22"> 
may be used to open/close the comments window and to step from comment to 
comment in forward or backward direction. If the comments window is open and you 
click a commented tree node then the associated comment will be shown in the 
comments window.</P>
<P><B>Error navigation</B></P>
<P>The two buttons 
<IMG alt=Errors src="Errors.png" 
align=absMiddle width="48" height="23"> may be used to open/close the error window and to step from 
error to error in forward or backward direction. The icon of an erroneous tree 
node has a little red rectangle on the right side, for instance 
<IMG 
alt="Error node" src="classint2.png" align=absMiddle width="21" height="15">. </P>
<P><B>Cut/copy/paste and drag/drop</B></P>
<P>Cut/copy/paste work in the usual way, using the clipboard of MS Windows. 
Proper enabling/disabling of the corresponding buttons 
<IMG 
alt=Cut/Copy/Paste src="CutCopyPaste.png" align=absMiddle width="70" height="22"> 
combined with subsequent checks that are performed anyway after each edit 
operation prevent inadmissible operations.</P>
<P>Drag-and-drop is also available in the declaration view. For instance you can 
rearrange the declarations of a package, the items of an enumeration type, or 
the features of an interface or implementation simply by drag-and-drop. To shift 
an item to the first position on its respective tree layer you can drag-and-drop 
it to the parent node. The <B>Shift</B> key can be used in the usual way to 
select a sequence of contiguous items.</P>
<P><B>Note that "cut" deletes a <FONT color=#ff0000><I>Lava</I></FONT> entity 
and a subsequent "paste" creates a new one in any case, having a new internal 
ID, whereas the "move" mode of drag-and-drop <FONT color=#ff0000>retains the 
identity</FONT> of the moved <FONT color=#ff0000><I>Lava</I></FONT> entity. If 
you drag and drop between different <I><FONT color=#ff0000>Lava</FONT></I> files 
the all existing references to the moved <I><FONT color=#ff0000>Lava</FONT></I> 
entity are updated accordingly, provided they are contained in a file that is 
open <FONT color=#ff0000>at that moment</FONT> in the <FONT 
color=#ff0000><I>Lava</I></FONT> declaration editor.</B></P>
<P>For drag-and-drop the default operation is <B>move</B> within the same 
document and <B>copy</B> between different documents. Press <B>Ctrl</B> to 
enforce <B>copy</B> and <B>Alt</B> to enforce <B>move</B> in any case. </P>
<P><B><a name="undoRedo"></a>Undo/Redo</B></P>
<P>Use the "Undo" and "Redo" buttons 
<IMG height=21 alt=Undo/Redo 
src="UndoRedo.png" width=44 align=absMiddle> to undo or redo 
individual edit operations in any of the <B><I><FONT 
color=#ff0000>LavaPE</FONT></I></B> views step by<span lang="de"> step.</span></P>
<P>Drag-and-drop operations 
between different <font color="#FF0000"><i><b>Lava</b></i></font> files modify 
these files in a single edit step. Up to <font color="#FF0000"><i><b>Lava</b></i></font> 
release 0.6.3 undo/redo had to be applied to each of these files separately. 
Release 0.6.4 has introduced synchronized undo/redo support for such operations: 
You have to apply undo/redo only to one of these files to undo/redo the edit 
step also in the other file. But note that you can undo/redo edit steps only in 
strictly reverse order. So if you have applied further edit steps to one or both 
of these files then you have to undo/redo these before you can undo/redo the 
drag-and-drop operation between the files, or else you have to resort to manual 
&quot;forward&quot; repair steps.</P>
<P><B>Go to declaration / return to reference</B></P>
<P>If the declaration of a <B><I><FONT color=#ff0000>Lava</FONT></I></B> entity 
references another <B><FONT color=#ff0000><I>Lava</I></FONT></B> entity then you 
can double-click the icon left of the actual declaration to jump to the 
referenced entity's declaration. Alternatively you can select the respective 
declaration node and click the "Go to declaration" button 
<IMG 
alt="go to declaration" src="GoToDecl.png" align=absMiddle width="22" height="21">. 
If the selected declaration references <I>more than one</I> other entity then a 
small combo box is popped up from which you can select where to go.</P>
<P>Use the "Return to reference" button 
<IMG alt="return to reference" 
src="ReturnToRef.png" align=absMiddle width="23" height="21"> to follow the sequence 
of such "Go to declaration" operations in backward direction (= back to the 
locations from where you came). Both operations may jump forth and back between 
exec and declaration views and even between different ("included") <B><I><FONT 
color=#ff0000>Lava</FONT></I></B> documents. </P>
<P><B>See also <A href="OverrideView.htm">override 
view</A>.</B></P></BODY></HTML>